{% comment %}
  Product Card Snippet
  Usage: {% render 'product-card', product: product %}
{% endcomment %}

<div class="product-card">
  <a href="{{ product.url }}" class="product-card__link">
    <div class="product-card__image-wrapper">
      {% if product.featured_image %}
        <img 
          src="{{ product.featured_image | image_url: width: 600 }}" 
          alt="{{ product.featured_image.alt | escape }}"
          loading="lazy"
          class="product-card__image"
        >
      {% else %}
        <div class="product-card__placeholder"></div>
      {% endif %}
      
      {% if product.compare_at_price > product.price %}
        <span class="product-card__badge luxeline-badge">
          {{ 'products.badge.sale' | t }}
        </span>
      {% elsif product.tags contains 'new' %}
        <span class="product-card__badge luxeline-badge luxeline-badge--primary">
          {{ 'products.badge.new' | t }}
        </span>
      {% elsif product.tags contains 'best-seller' %}
        <span class="product-card__badge luxeline-badge">
          {{ 'products.badge.best_seller' | t }}
        </span>
      {% endif %}
      
      {% unless product.available %}
        <span class="product-card__badge luxeline-badge luxeline-badge--primary">
          {{ 'products.badge.sold_out' | t }}
        </span>
      {% endunless %}
      
      <div class="product-card__quick-add">
        <button type="button" class="luxeline-button luxeline-button--primary luxeline-button--full" data-quick-add="{{ product.id }}">
          {% render 'icon', icon: 'cart' %}
          <span>{{ 'products.quick_add' | t }}</span>
        </button>
      </div>
    </div>
    
    <div class="product-card__content">
      <h3 class="product-card__title">{{ product.title }}</h3>
      
      {% if product.metafields.reviews.rating.value %}
        <div class="product-card__rating">
          {% assign rating = product.metafields.reviews.rating.value %}
          {% for i in (1..5) %}
            <span class="star{% if i <= rating %} star--filled{% endif %}">{% render 'icon', icon: 'star' %}</span>
          {% endfor %}
          {% if product.metafields.reviews.count.value %}
            <span class="product-card__rating-count">({{ product.metafields.reviews.count.value }})</span>
          {% endif %}
        </div>
      {% endif %}
      
      {% if product.variants.size > 1 and product.options_with_values.size > 0 %}
        <div class="product-card__colors">
          {% assign color_option = product.options_with_values | where: "name", "Color" | first %}
          {% if color_option %}
            {% for value in color_option.values limit: 5 %}
              {% assign color_class = value | handle %}
              <span 
                class="product-card__color-swatch" 
                title="{{ value }}"
                style="{% if color_class == 'black' or color_class == 'natural-black' %}background-color: #1a1a1a;{% elsif color_class == 'dark-brown' %}background-color: #4a3228;{% elsif color_class == 'light-brown' or color_class == 'brown' %}background-color: #8b5a3c;{% elsif color_class == 'blonde' %}background-color: #c4a57b;{% elsif color_class == 'red' %}background-color: #8b3a3a;{% elsif color_class == 'burgundy' %}background-color: #6b2737;{% elsif color_class == 'auburn' %}background-color: #914b3b;{% else %}background-color: #9c8579;{% endif %}"
              ></span>
            {% endfor %}
            {% if color_option.values.size > 5 %}
              <span class="product-card__more-colors">+{{ color_option.values.size | minus: 5 }}</span>
            {% endif %}
          {% endif %}
        </div>
      {% endif %}
      
      <div class="product-card__price">
        {% render 'price', product: product %}
      </div>
    </div>
  </a>
</div>

<style>
.product-card {
  position: relative;
}

.product-card__link {
  display: block;
  text-decoration: none;
  color: inherit;
}

.product-card__image-wrapper {
  position: relative;
  overflow: hidden;
  border-radius: var(--luxeline-radius);
  background-color: var(--luxeline-muted);
  height: 400px;
  margin-bottom: 1rem;
}

.product-card__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.product-card:hover .product-card__image {
  transform: scale(1.1);
}

.product-card__placeholder {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, var(--luxeline-muted) 0%, #e8ddd5 100%);
}

.product-card__badge {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 2;
}

.product-card__quick-add {
  position: absolute;
  bottom: 1rem;
  left: 1rem;
  right: 1rem;
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.3s ease;
  z-index: 2;
}

.product-card:hover .product-card__quick-add {
  opacity: 1;
  transform: translateY(0);
}

.product-card__quick-add button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.product-card__quick-add svg {
  width: 16px;
  height: 16px;
}

.product-card__title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--luxeline-primary);
  margin-bottom: 0.5rem;
  transition: color 0.2s ease;
}

.product-card:hover .product-card__title {
  color: var(--luxeline-accent);
}

.product-card__rating {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  margin-bottom: 0.5rem;
}

.product-card__rating svg {
  width: 12px;
  height: 12px;
  stroke: var(--luxeline-accent);
}

.product-card__rating .star--filled svg {
  fill: var(--luxeline-accent);
}

.product-card__rating-count {
  font-size: 0.75rem;
  color: rgba(114, 81, 60, 0.6);
  margin-left: 0.25rem;
}

.product-card__colors {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  margin-bottom: 0.5rem;
}

.product-card__color-swatch {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid rgba(114, 81, 60, 0.2);
}

.product-card__more-colors {
  font-size: 0.75rem;
  color: rgba(114, 81, 60, 0.6);
  margin-left: 0.25rem;
}

.product-card__price {
  margin-top: 0.5rem;
}
</style>
